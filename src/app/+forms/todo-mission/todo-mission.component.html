  <div class="layout_content wt-project-background ng-scope" style="background-image: none;background-color: transparent;">
    <div class="layout_content_main" style="margin-right: 0px;" *ngIf="is_show_power[cookie_u_id]">
      <div class="mod-navbar">
        <div class="main ng-scope" >
          <div class="title">
            <h3>
              <a  class="js-popbox prj_icon" >
                <i class="fa-fw fa fa-inbox txt-color-greenNormal" ></i>
              </a>
              <a class="js-popbox prj_name ng-binding" >{{todoList?.result?.project_title}}</a>
            </h3>
            <!--<a class="fa fa-cog color-text-graylight js-popbox">
            </a>-->
          </div>
          <div class="main_toolbar">
            <div   class="ng-scope">
              <div class="sub_toolbar ng-scope">
                <div class="btn-group js-popbox mr-5 ng-scope" >
                  <button class="btn btn-success btn--fancy ng-binding" data-toggle="dropdown" (click)="showPublishTemplate(todoList?.result?.project_id,3)">新建任务列表</button>
                  <ul class="dropdown-menu pull-right" style="width: 300px;padding: 10px 20px;">
                    <!--<li>-->
                      <!--<button type="button" class="close margin-bottom-10" data-dismiss="modal" aria-hidden="true">-->
                      <!--×-->
                    <!--</button>-->
                    <!--</li>-->
                    <li>
                      <div class="form-group">
                        <input  name="template_name" [(ngModel)]="template_name" placeholder="列表名" type="text" class="form-control ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" required="" >
                      </div>
                    </li>
                    <li>
                      <div class="form-group">
                        <button  data-loading-text="保存中…" class="btn btn-success mr_15 ng-binding" (click)="showPublishTemplate(todoList?.result?.project_id,2)" >保&nbsp;&nbsp;存</button>
                        <button  class="btn btn-link btn-cancel ng-binding" (click)="showPublishTemplate(todoList?.result?.project_id,3)">取&nbsp;&nbsp;消</button>
                      </div>
                    </li>
                  </ul>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="ng-scope">
          <div class="entries_panel js-sortable layout_content_main_tasks ng-scope wt-scroll"   style="overflow-x: auto; overflow-y: hidden;">
            <div class="entries_panel_sortarea ui-sortable" >

              <div class="entry ng-scope" *ngFor="let tl of todoList?.result?.template_list" >
                <div class="entry_header ui-sortable-handle">
                  <i class="wtfont wtf-entryhover ng-scope" ></i>
                  <div class="entry_header_title">
                    <h2>
                      <a data-toggle="dropdown"><span class="ng-binding ng-scope" (click)="showEditTemplateName(tl.info,tl.key)">{{tl.info}}</span></a>
                      <ul class="dropdown-menu pull-right" style="width: 300px;padding: 10px 20px;">
                        <li>
                          <button type="button" class="close margin-bottom-10" data-dismiss="modal" aria-hidden="true">
                            ×
                          </button>
                          <h4>重命名</h4>
                        </li>
                        <li>
                          <div class="form-group">
                            <input name="entry_name" [(ngModel)]="edit_template_name[tl.key]" placeholder="" type="text" class="form-control ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" required="" >
                          </div>
                        </li>
                        <li>
                          <div class="form-group">
                            <button  data-loading-text="保存中…" class="btn btn-success mr_15 ng-binding" (click)="editTemplateName(todoList?.result?.project_id,tl.key)">保&nbsp;&nbsp;存</button>
                            <button  class="btn btn-link btn-cancel ng-binding">取&nbsp;&nbsp;消</button>
                          </div>
                        </li>
                      </ul>

                    </h2>
                  </div>
                    <a  class="entry_header_number ng-binding ng-scope" >
                      {{tl.complate_count}} / {{tl.todo_list_count}} </a>
                  </div>
                  <div class="entry-task-panel wt-scroll"  style="overflow-x: hidden; overflow-y: auto; max-height: 218px;">
                    <div class="entry-tasks js-sortable ui-sortable" >

                      <div [ngClass]="{'right_click_trigger slide-trigger js-popbox false task task_style task-':true,'task-selected':tl1.todo_status==2}" *ngFor="let tl1 of tl.todo_list">
                        <div [ngClass]="{'entry-task-main':true,'task-completed-style':tl1.todo_status==2}">
                          <a class="entry-task-check ng-scope" *ngIf="tl1.todo_status != 2" (click)="editStatus(2,tl1.todo_id,todoList?.result?.project_id)">
                            <i class="fa fa-square-o"></i>
                          </a>
                          <a class="entry-task-check ng-scope" *ngIf="tl1.todo_status == 2" (click)="editStatus(1,tl1.todo_id,todoList?.result?.project_id)">
                            <i class="fa fa-check-square"></i>
                          </a>
                          <a class="entry-task-title ng-binding" (click)="showDetail(tl1.todo_id,tl.key,tl.info)">{{tl1.todo_title}}</a>
                        </div>
                        <div class="task-badges">
                          <span class="task-badge fa fa-clock-o badge-expire-soon" title="任务即将截止">{{tl1.expired_at | date:'yyyy-MM-dd'}}</span>
                          <span class="task-badge fa fa-comment-o" title="任务有 {{tl1.comment_count}} 个评论">{{tl1.comment_count}}</span>
                          <span class="task-badge fa fa-align-left" title="任务有描述" *ngIf="tl1.todo_content"></span>
                          <span class="task-badge task-label yellow-label" title="{{tag}}" *ngFor="let tag of tl1.tags">{{tag}}</span>
                        </div>
                        <div class="entry-task-members" *ngIf="tl1.todo_assign">
                          <a class="js-popbox member avatar ng-scope avatar-28" title="{{h.u_username}}" *ngFor="let h of tl1.assignList">
                            <img alt="{{h.u_username}}" class="online width-28" src="{{domain_url}}{{h.u_avatar}}" *ngIf="h.u_avatar">
                            <img alt="{{h.u_username}}" class="online width-28" src="assets/img/avatars/male.png" *ngIf="!h.u_avatar">
                          </a>
                        </div>
                      </div>

                    </div>

                    <!--新建任务发布框-->
                    <div class="entry-add-bottom-composer entry-task-composer ng-isolate-scope" *ngIf="selects[tl.key]">
                      <div class="composer-body" >
                        <div class="entry-task-labels">
                        </div>
                        <textarea rows="2" class="form-control help-block" placeholder="请输入任务标题" [(ngModel)]="publish_todo_title[tl.key]"></textarea>
                        <div class="composer-body-footer">
                          <div class="task-badges" >
                          </div>
                        </div>
                      </div>
                      <div class="composer-footer">
                        <button  class="btn btn-success btn--big confirm mr-10 ng-binding" (click)="submitTodo(todoList?.result?.project_id,tl.key)">保&nbsp;&nbsp;存</button>
                        <button  class="btn btn-link btn-cancel ng-binding" (click)="showAddTodo(tl.key)">取&nbsp;&nbsp;消</button>
                      </div>
                    </div>

                  </div>
                  <div class="entry-task-footer ng-scope" *ngIf=" ! selects[tl.key]">
                    <a  class="js-add-task-composer ng-binding ng-scope" (click)="showAddTodo(tl.key)">
                      <i class="fa fa-plus-circle"></i> 新建任务
                    </a>
                  </div>
                </div>


            <div class="entry-new ng-scope" >
              <a  class="ng-binding entry-add" *ngIf="!is_show_publish_template" (click)="showPublishTemplate(todoList?.result?.project_id,1)">
                <i class="fa fa-plus-circle"></i> 新建任务列表
              </a>
              <div  class="padding-10 " *ngIf="is_show_publish_template"><!-- ng-hide-->
                <div class="form-group">
                  <input name="template_name" [(ngModel)]="template_name" placeholder="列表名" type="text" class="form-control ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" required="" >
                </div>
                <div class="form-group">
                  <button  data-loading-text="保存中…" class="btn btn-success mr_15 ng-binding" (click)="showPublishTemplate(todoList?.result?.project_id,2)">保&nbsp;&nbsp;存</button>
                  <button  class="btn btn-link btn-cancel ng-binding" (click)="showPublishTemplate(todoList?.result?.project_id,3)">取&nbsp;&nbsp;消</button>
                </div>
              </div>
            </div>

            </div>
          </div>
        </div>
        <div class="layout_right_sidebar layout_right_sidebar--project" style="width: 1px;">

        </div>
      </div>
    </div>
    <div class="empty-panel" *ngIf="! is_show_power[cookie_u_id]">
      <i class="fa fa-ban"></i>
      <br>
      <span  class="ng-binding ng-scope">你没有权限访问该项目<br>该项目被删除或者你不是该项目的成员。 </span>
      <span  class="ng-binding ng-hide"></span>
    </div>

<!-- select-hidden-->
<div class="slide-content dragfile_element_309416 in" *ngIf="is_show_detail">
  <div class="entity-well entity-well--tasks">

    <div  class="ng-scope">
      <div  class="h_100p ng-scope dragfile_element_622735" >
        <div class="entity-well-header" >
          <a  class="entity-project-name ng-binding" >{{todoList?.result?.project_title}}</a>
          <ul class="entity-well-header-nav nav nav-pills pull-right">

            <li [ngClass]="{'js-popbox ng-scope':!is_show_center_tag && is_show_center_tag != 4}" ><!--data-toggle="dropdown" -->
              <a  class="ng-binding" (click)="showPublishTag(todo_info?.result?.todo_id,4)">
                <i class="fa fa-tag"></i> 标签
              </a>
              <ul [ngClass]="{'popbox-menu checkable checkable--popboxmenu dropdown-menu pull-right':true,'show-tag':is_show_center_tag==4}" style="width: 300px;padding: 10px 20px;" *ngIf="is_show_center_tag==4">
                <li>
                  <!--<button type="button" class="close margin-bottom-10" data-dismiss="modal" aria-hidden="true">-->
                    <!--×-->
                  <!--</button>-->
                  <h3 class="">设置标签</h3>
                  <hr>
                </li>
                <li [ngClass]="{'label-item ng-scope':true,'selected':selected_tag['T'+tcl1.category_id]}" (click)="selectTag(tcl1.category_id)" *ngFor="let tcl1 of todo_info?.result?.category_list ">
                  <a  class="js-toggle-label-filter green-label" >
                    <span class="label-name padding-left-20" title="{{tcl1.category_desc}}">{{tcl1.category_desc}}</span>
                  </a>
                </li>
                <li>
                  <div class="form-group">
                    <button  data-loading-text="保存中…" class="btn btn-success mr_15 ng-binding" (click)="showPublishTag('',2)">保&nbsp;&nbsp;存</button>
                    <button  class="btn btn-link btn-cancel ng-binding" (click)="showPublishTag('',3)">取&nbsp;&nbsp;消</button>
                  </div>
                </li>
              </ul>
            </li>
            <!--<li class="js-popbox ng-scope" >-->
              <!--<a  class="dropdown-toggle ng-binding"  title="添加附件">-->
                <!--<i class="fa fa-paperclip"></i> 附件</a>-->
            <!--</li>-->
            <li class="divider-v ng-scope" >
            </li>
            <li class="js-popbox ng-scope" >
              <a  class="dropdown-toggle ng-binding"  data-toggle="dropdown" title="更多">
                <i class="fa fa-chevron-down"></i> 更多</a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li  class="ng-scope">
                  <a   class="ng-binding" (click)="showPublishDetail(todo_info?.result?.todo_id,1)">
                    <i class="fa fa-pencil fa-fw"></i> 编辑
                  </a>
                </li>
                <li  class="divider ng-scope">
                </li>
                <li  class="ng-scope">
                  <a  class="ng-binding" (click)="deleteTodo(todo_info?.result?.project_id,todo_info?.result?.todo_id)">
                    <i class="fa fa-trash-o fa-fw"></i> 删除</a>
                </li>
              </ul>
            </li>
            <li class="divider-v"></li>
            <li><a class="entity-well-header-close" (click)="hideDetail()">
              <i class="fa fa-times"></i></a>
            </li>
          </ul>
        </div>
        <div class="entity-well-scroll height-nonav height-nonav--notab ng-scope wt-scroll"  style="overflow-x: hidden; overflow-y: auto;">
          <div class="entity-well-content">
            <div  class="ng-scope">
              <div class="entity-title" *ngIf="todo_info?.result?.todo_status == 1">
                <a (click)="editStatusInfo(2,todo_info?.result?.todo_id)">
                  <i class="fa fa-square-o" ></i>
                </a>
                <h2 (dblclick)="showPublishDetail(todo_info?.result?.todo_id,1)">
                  <span  class="ng-binding">{{todo_info?.result?.todo_title}}</span>
                  <span class="entity-title--entry ng-binding ng-scope">{{detail_template_name}}</span>
                </h2>
              </div>
              <div class="entity-title" *ngIf="todo_info?.result?.todo_status == 2">
                <a (click)="editStatusInfo(1,todo_info?.result?.todo_id)">
                  <i class="fa fa-check-square" ></i>
                </a>
                <h2 >
                  <span  class="ng-binding task-completed-style">{{todo_info?.result?.todo_title}} </span>
                  <span class="entity-title--entry ng-binding ng-scope" >{{detail_template_name}}</span>
                </h2>
              </div>
              <div class="entity-desc markdown ng-scope ng-binding " *ngIf="todo_info?.result?.todo_content">
                <p>{{todo_info?.result?.todo_content}}</p>
              </div>
              <a class="entity-desc-edit ng-binding ng-scope" *ngIf="! todo_info?.result?.todo_content && !is_show_publish_detail" (click)="showPublishDetail(todo_info?.result?.todo_id,1)">添加任务描述</a>
            </div>
            <div class="edit-section ng-scope well"  *ngIf="is_show_publish_detail">
              <div>
                <input type="text" name="todo_name" [(ngModel)]="todo_name" class="form-control help-block ng-pristine ng-valid ng-not-empty ng-valid-required ng-touched" placeholder="任务名称" required="">
                <sa-widget [colorbutton]="false" [editbutton]="false" [togglebutton]="false" [fullscreenbutton]="false" [sortable]="false">
                  <header>
                    <span class="widget-icon"> <i class="fa fa-pencil"></i> </span>
                    <h2>添加任务描述 </h2>
                  </header>
                  <div>
                    <div class="widget-body no-padding">
                      <textarea class="form-control help-block" placeholder="请输入任务描述" name="todo_content" [(ngModel)]="todo_content"></textarea>
                    </div>
                  </div>
                </sa-widget>
              </div>
              <div class="form-group">
                <button  class="btn btn-success mr_15 ng-binding" (click)="showPublishDetail('',2)">保&nbsp;&nbsp;存</button>
                <button  class="btn btn-link btn-cancel ng-binding" (click)="showPublishDetail('',3)">取&nbsp;&nbsp;消</button>
              </div>
            </div>
            <div class="entity-members">
              <dl class="entity-members-assign ng-scope" >
                <dt class="ng-binding">分配任务给</dt>
                <dd>
                  <ul class="avatars">
                    <li  class="ng-scope" *ngFor="let au1 of todo_info?.result?.assign_list">
                      <a  class="fa fa-times-circle" ></a>
                      <a class="js-popbox avatar avatar-40"  title="{{au1.u_username}}">
                        <img alt="{{au1.u_username}}" class="online width-40" src="{{domain_url}}{{au1.u_avatar}}" *ngIf="au1.u_avatar">
                        <img alt="{{au1.u_username}}" class="online width-40" src="assets/img/avatars/male.png" *ngIf="!au1.u_avatar">
                      </a>
                    </li>
                    <li  class="ng-scope">
                      <div class="js-popbox text-center ng-isolate-scope" type="member" >
                        <a class="avatar-add" data-toggle="modal" data-target="#myModalname" (click)="showUserListDiv(todo_info?.result?.c_id,1)">
                          <span class="o">＋</span>
                        </a>
                      </div>
                    </li>
                  </ul>
                </dd>
              </dl>
              <dl class="entity-members-watchs ng-scope">
                <dt class="ng-binding">关注的人</dt>
                <dd>
                  <ul class="avatars">
                    <li  class="ng-scope" *ngFor="let au2 of todo_info?.result?.follower_list">
                      <a  class="fa fa-times-circle" ></a>
                      <a class="js-popbox avatar avatar-40"  title="{{au2.u_username}}">
                        <img alt="{{au2.u_username}}" class="online width-40" src="{{domain_url}}{{au2.u_avatar}}" *ngIf="au2.u_avatar">
                        <img alt="{{au2.u_username}}" class="online width-40" src="assets/img/avatars/male.png" *ngIf="!au2.u_avatar">
                      </a>
                    </li>
                    <li  class="ng-scope">
                      <div class="js-popbox text-center ng-isolate-scope"  type="watch" >
                        <a class="avatar-add"  data-toggle="modal" data-target="#myModalname" (click)="showUserListDiv(todo_info?.result?.c_id,2)">
                          <span class="o">＋</span>
                        </a>
                      </div>
                    </li>

                  </ul>
                </dd>
              </dl>
              <dl class="entity-members-watchs ng-scope">
                <dt class="ng-binding">审批人</dt>
                <dd>
                  <ul class="avatars">
                    <li  class="ng-scope">
                      <a  class="fa fa-times-circle" ></a>
                      <a class="js-popbox avatar avatar-40" title="兴凤" >
                        <img alt="user" class="online width-40" src="assets/img/avatars/male.png">
                      </a>
                    </li>
                    <li  class="ng-scope">
                      <div class="js-popbox text-center ng-isolate-scope"  type="watch" >
                        <a class="avatar-add"  >
                          <span class="o">＋</span>
                        </a>
                      </div>
                    </li>
                    <!--<li >-->
                      <!--<div class="js-popbox text-center" >-->
                        <!--<a class="avatar-add" title="取消关注" >-->
                          <!--<span class="o ng-binding">－</span>-->
                        <!--</a>-->
                      <!--</div>-->
                    <!--</li>-->
                  </ul>
                </dd>
              </dl>
            </div>
            <hr class="entity-hr ng-scope" >
            <div class="entity-well-content-module">
              <dl class="module-expire-date ng-scope">
                <dt class="ng-binding">
                  <i class="fa fa-clock-o"></i> 截止日期
                </dt>
                <dd class="js_popbox">
                  <a class="ng-binding expire-text-soon" *ngIf="!is_expired_at" (click)="editExpiredAt(todo_info?.result?.expired_at,1)">&nbsp;&nbsp;{{todo_info?.result?.expired_at | date:'yyyy-MM-dd'}}&nbsp;&nbsp;</a>
                  <input type="date" name="expired_at" (blur)="editExpiredAt(todo_info?.result?.todo_id,2)" [(ngModel)]="expired_at" value="{{expired_at}}" class="ng-binding expire-text-soon" *ngIf="is_expired_at"/>
                </dd>
              </dl>
              <dl class="module-label ng-scope">
                <dt class="ng-binding"><i class="fa fa-tag"></i> 标 签
                </dt>
                <dd>
                  <ul class="margin-padding">
                    <li class="task-label green-label" title="" *ngFor="let ta of todo_info?.result?.todo_category_list ">
                      <span class="ng-binding">{{ta.category_desc}}</span>
                      <a class="action-icon edit fa fa-remove" title="移除该标签" (click)="removeTags(todo_info?.result?.todo_id,ta.category_id)">
                      </a>
                    </li>
                    <!--<li class="task-label yellow-label" title="">-->
                      <!--<span  class="ng-binding">一般</span>-->
                      <!--<a class="action-icon edit fa fa-remove"  title="移除该标签"></a>-->
                    <!--</li>-->
                    <!--<li class="task-label orange-label" title="" >-->
                      <!--<span  class="ng-binding">紧急</span>-->
                      <!--<a class="action-icon edit fa fa-remove" title="移除该标签">-->
                      <!--</a>-->
                    <!--</li>-->
                    <!--<li class="task-label red-label" title="" >-->
                      <!--<span  class="ng-binding">非常紧急</span>-->
                      <!--<a class="action-icon edit fa fa-remove"  title="移除该标签"></a>-->
                    <!--</li>-->
                    <li class="task-label-add">
                      <a  class="js-popbox ng-binding ng-scope" data-toggle="dropdown" (click)="showPublishTag(todo_info?.result?.todo_id,1)" *ngIf="!is_show_publish_tag && (!is_show_center_tag || is_show_center_tag == 4)">＋ 添加标签
                      </a>
                      <ul class="popbox-menu checkable  checkable--popboxmenu dropdown-menu pull-right" style="width: 300px;padding: 10px 20px;display: block;" *ngIf="is_show_publish_tag && is_show_center_tag==1">
                        <li>
                          <button type="button" class="close margin-bottom-10" data-dismiss="modal" aria-hidden="true">
                            ×
                          </button>
                          <h3 class="">设置标签</h3>
                          <hr>
                        </li>
                        <li [ngClass]="{'label-item ng-scope':true,' selected':selected_tag['T'+tcl.category_id]}" (click)="selectTag(tcl.category_id)" *ngFor="let tcl of todo_info?.result?.category_list ">
                          <a  class="js-toggle-label-filter green-label" ><!--yellow-label orange-label red-label  -->
                            <span class="label-name padding-left-20 ng-binding" title="{{tcl.category_desc}}" >{{tcl.category_desc}}</span>
                          </a>
                        </li>
                        <li>
                          <div class="form-group">
                            <button  data-loading-text="保存中…" class="btn btn-success mr_15 ng-binding" (click)="showPublishTag('',2)" >保&nbsp;&nbsp;存</button>
                            <button  class="btn btn-link btn-cancel ng-binding" (click)="showPublishTag('',1)">取&nbsp;&nbsp;消</button>
                          </div>
                        </li>
                      </ul>

                    </li>
                  </ul>
                </dd>
              </dl>
              <!--<dl class="module-attachment dragfile-hover-show ng-scope" >
                <dt class="ng-binding">
                  <i class="fa fa-paperclip"></i> 附件</dt>
                <dd>
                  <div class="dragfile-hover-placeholder">
                    <span class="name ng-binding"><i class="fa fa-upload"></i> 松开上传文件</span>
                  </div>
                </dd>
              </dl>
              <dl class="module-attachment ng-hide">
                <dt class="ng-binding"><i class="fa fa-paperclip"></i> 附件</dt>
                <dd>
                  <div type="task"  class="ng-isolate-scope">
                    <div  class="upload-attachment-file-process ng-hide" >
                    </div>
                  </div>
                  <div class="task-attachment-add ng-scope" >
                    <a  class="ng-binding">＋ 添加附件</a>
                  </div>
                  <div class="dragfile-hover-placeholder">
                    <span class="name ng-binding"><i class="fa fa-upload"></i> 松开上传文件</span>
                  </div>
                </dd>
              </dl>-->
            </div>
            <hr class="entity-hr">
            <div class="entity-content-footer">
              <div  class="ng-binding ng-scope">{{todo_info?.result?.u_username}} {{todo_info?.result?.created_at}}，创建了任务</div>
            </div>
          </div>
          <div class="margin-10">
            <sa-widget [editbutton]="false" [fullscreenbutton]="false" [custombutton]="false" [sortable]="false">
              <header>
                <ul class="nav nav-tabs pull-left in">
                  <li [class.active]="state.tabs.demo3=='hr1'" class="active">
                    <a (click)="state.tabs.demo3 = 'hr1'">评论</a>
                  </li>
                  <li [class.active]="state.tabs.demo3=='hr2'" class="active">
                    <a (click)="state.tabs.demo3 = 'hr2'">活动</a>
                  </li>
                </ul>
              </header>
              <div>
                <div class="widget-body">
                  <tabset>
                    <tab [active]="state.tabs.demo3 == 'hr1'">
                      <tabset >
                        <tab [active]="state.tabs.demo3 == 'hr1'">
                          <div class="row">
                            <div class="comment-list">

                              <div *ngFor="let cl of comment_list?.result;let ind=index;">
                              <div class="timeline-seperator text-center"><span>{{cl.created_at | date:"yyyy-MM-dd"}}</span>
                              </div>
                              <div class="chat-body no-padding profile-message">
                                <ul>
                                  <li class="message">
                                    <img src="assets/img/avatars/female.png" class="online" alt="user">
                                    <span class="message-text">
                                      <a class="username">{{cl.u_username}}
                                          <small class="text-muted pull-right ultra-light"> {{cl.return_time}}</small>
                                      </a> {{cl.comment_content}}
                                    </span>
                                    <ul class="list-inline font-xs">
                                      <li>
                                        <a class="text-info" (click)="showComment(cl.comment_id,ind)"><i class="fa fa-reply"></i> 回复</a>
                                      </li>
                                      <li>
                                        <a class="text-danger"><i class="fa fa-thumbs-up"></i>赞</a>
                                      </li>
                                      <li>
                                        <a class="text-muted">显示所有的评论 ({{cl.replayCount}})</a>
                                      </li>
                                      <li *ngIf="is_show_replay != ind && cl.replayCount > 0">
                                        <a class="text-primary" (click)="isShowReplayList(ind)">显示回复</a>
                                      </li>
                                      <li *ngIf="is_show_replay == ind && cl.replayCount > 0">
                                        <a class="text-primary" (click)="isShowReplayList(99999)">隐藏回复</a>
                                      </li>
                                    </ul>
                                  </li>
                                  <div *ngIf="is_show_replay == ind">
                                  <li class="message message-reply" *ngFor="let rl of cl.replayList">
                                    <img src="assets/img/avatars/female.png" class="online" alt="user">
                                    <span class="message-text"> <a class="username">{{rl.u_username}} </a> {{rl.comment_content}} <i class="fa fa-smile-o txt-color-orange"></i> </span>
                                    <ul class="list-inline font-xs">
                                      <li>
                                        <a  class="text-muted"> {{rl.return_time}}</a>
                                      </li>
                                      <li>
                                        <a class="text-danger"><i class="fa fa-thumbs-up"></i> 赞</a>
                                      </li>
                                    </ul>
                                  </li>
                                  </div>
                                  <li *ngIf="comment_parent_id == cl.comment_id">
                                    <div class="input-group wall-comment-reply">
                                      <input  type="text" class="form-control" placeholder="这里输入您回复的消息..." name="replay_content" [(ngModel)]="replay_content">
                                      <span class="input-group-btn">
                                        <button class="btn btn-success" (click)="publishComment(todo_info?.result?.todo_id,2)">
                                            <i class="fa fa-reply"></i> 回复
                                        </button> </span>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                              </div>

                              <div class="new-comment ng-scope" >
                                <hr class="ng-scope">
                                <form method="post" class="well  margin-10" onsubmit="return false;">
                                  <textarea rows="2" class="form-control" placeholder="你在想什么?" name="comment_content" [(ngModel)]="comment_content"></textarea>

                                  <div class="margin-top-10">
                                    <!--<button type="submit" class="btn btn-sm btn-primary pull-right">
                                      发布
                                    </button>-->
                                    <button class="btn btn-success pull-right ng-binding" (click)="publishComment(todo_info?.result?.todo_id,1)">发表评论</button>
                                    <a class="btn btn-link profile-link-btn" rel="tooltip" data-placement="bottom" title="添加位置"><i class="fa fa-location-arrow"></i></a>
                                    <a class="btn btn-link profile-link-btn" rel="tooltip" data-placement="bottom" title="添加声音"><i class="fa fa-microphone"></i></a>
                                    <a class="btn btn-link profile-link-btn" rel="tooltip" data-placement="bottom" title="添加照片"><i class="fa fa-camera"></i></a>
                                    <a class="btn btn-link profile-link-btn" rel="tooltip" data-placement="bottom" title="添加文件"><i class="fa fa-file"></i></a>
                                  </div>
                                </form>
                              </div>
                            </div>


                          </div>
                        </tab>
                      </tabset>
                    </tab>
                    <tab [active]="state.tabs.demo3 == 'hr2'">
                      <tabset >
                        <tab [active]="state.tabs.demo3 == 'hr2'">
                          <div class="row">
                            <div class="empty-panel ng-scope" >
                              <i class="fa fa-clock-o"></i>
                              <br>
                              <span class="ng-binding">还没有任何活动</span>
                            </div>
                            <div class="activity-list m_15 ng-scope">
                              <ul class="activities">
                                <li class="activity-item activity-item-day" >
                                  <div class="activity-day" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday">周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-blue fa-comment" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:08</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30"  title="兴凤" >
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">

                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">发表了评论
                                              <strong>回复 @dingtalk_c9a95186d73c46bc9890b15a5ee6b2bc : jhkjhfggh...</strong>
                                          </span>

                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br></span>
                                    <strong>12/19</strong>
                                    <span class="weekday">周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-blue fa-comment" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date">10:08</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30" >
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">发表了评论
                                              <strong >fgghhh</strong>
                                          </span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item">
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-tag"></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">设置标签</span>
                                          <span class="label ng-scope orange-label">&nbsp;</span>
                                          <span  class="ng-scope"> 紧急</span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item">
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-tag"></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">设置标签</span>
                                          <span class="label ng-scope green-label">&nbsp;</span>
                                          <span  class="ng-scope">重要</span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item">
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-tag"></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">设置标签</span>
                                          <span class="label ng-scope red-label">&nbsp;</span>
                                          <span  class="ng-scope">非常紧急</span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item">
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-tag"></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">设置标签</span>
                                          <span class="label ng-scope yellow-label">&nbsp;</span>
                                          <span  class="ng-scope">一般</span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide">
                                    <span class="year" >2017<br></span>
                                    <strong>12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-yellow fa-clock-o" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30" >
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope">兴凤</span>
                                          <span class="verb ng-scope">设置截止日期</span>
                                          <span  class="ng-scope">2017-12-19 23:59</span>
                                      </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br>
                                    </span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-user" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope">兴凤</span>
                                          <span class="verb ng-scope">分配任务给</span>
                                          <a class="entity-avatar avatar avatar-30" >
                                            <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                            <span class="avatar-name ">兴凤</span>
                                          </a>
                                     </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br>
                                    </span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-red fa-user" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">取消分配任务给</span>
                                          <a class="entity-avatar avatar avatar-30">
                                            <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                            <span class="avatar-name ">兴凤</span></a>
                                      </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br>
                                    </span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-user" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope">兴凤</span>
                                          <span class="verb ng-scope">添加审批人</span>
                                          <a class="entity-avatar avatar avatar-30" >
                                            <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                            <span class="avatar-name ">兴凤</span>
                                          </a>
                                     </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br>
                                    </span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-red fa-user" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">取消审批人</span>
                                          <a class="entity-avatar avatar avatar-30">
                                            <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                            <span class="avatar-name ">兴凤</span></a>
                                      </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br>
                                    </span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-eye" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope">兴凤</span>
                                          <span class="verb ng-scope">提醒</span>
                                          <a class="entity-avatar avatar avatar-30" >
                                            <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                            <span class="avatar-name ">兴凤</span>
                                            <span class="ng-scope">关注任务</span>
                                          </a>
                                     </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br>
                                    </span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-red fa-eye" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope"> 移除</span>
                                          <a class="entity-avatar avatar avatar-30">
                                            <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                            <span class="avatar-name ">兴凤</span>
                                          <span class="ng-scope">关注任务</span>
                                          </a>
                                      </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday" >周二</span></div>
                                  <div class="activity-icon">
                                    <i class="fa ai-yellow fa-square-o" >
                                    </i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30" >
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">修改任务</span>
                                          <span class="ng-scope"> 描述为 <strong>vcbcvbcvbcvb</strong></span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item" >
                                  <div class="activity-day ng-hide">
                                    <span class="year" >2017<br></span>
                                    <strong >12/19</strong>
                                    <span class="weekday">周二</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-red fa-square-o" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >10:07</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">取消完成任务</span>
                                    </span>
                                  </div>
                                </li>
                                <li class="activity-item activity-item-day">
                                  <div class="activity-day" >
                                    <span class="year" >2017<br></span>
                                    <strong >12/13</strong>
                                    <span class="weekday">周三</span>
                                  </div>
                                  <div class="activity-icon">
                                    <i class="fa ai-green fa-check-square" ></i>
                                  </div>
                                  <div class="activity-meta">
                                    <span class="date" >17:05</span>
                                  </div>
                                  <a class="activity-avatar avatar avatar-30">
                                    <img alt="user" class="online width-28" src="assets/img/avatars/male.png">
                                  </a>
                                  <div class="activity-itemwarp">
                                    <span class="activity">
                                          <span class="actor ng-scope" >兴凤</span>
                                          <span class="verb ng-scope">完成任务</span>
                                     </span>
                                  </div>
                                </li>
                              </ul>
                            </div>
                            <div class="loading-more-panel ng-scope">
                              <div class="part-loading ng-hide" >
                              </div>
                              <button class="btn ng-binding btn-default " >加载更多…</button>
                            </div>
                          </div>


                        </tab>
                      </tabset>
                    </tab>

                  </tabset>
                </div>
              </div>
            </sa-widget>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

    <div class="modal fade" id="myModalname" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <!-- 关闭按钮 -->
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
              ×
            </button>
            <!-- 标题 -->
            <h3 class="modal-title" data-ng-bind='results.title'>分配任务</h3>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class=" form-group  col col-lg-12" >
                <div class="selector-choices-wrapper">

                  <div class="tab-contents">
                    <div class="tab-contents-box">
                      <ul>

                        <li class="entity-members" *ngIf="cookie_c_id == admin_id">
                          <dl class="entity-members-assign ng-scope" >
                            <dt class="ng-binding">选择公司</dt>
                            <dd>
                              <select name="c_id" [(ngModel)]="c_id" (change)="selectCustomer($event)">
                                <option value="0" >--选择公司--</option>
                                <option value="{{c.c_id}}" *ngFor="let c of todo_info?.result?.customer_list">{{c.c_name}}</option>
                              </select>
                            </dd>
                          </dl>
                        </li>

                        <li class="checkbox-item table  smart-form">
                          <label class="checkbox">
                            <input name="checkbox-inline" type="checkbox" [checked]="check" (change)="changeCheckAll($event)">全选
                            <i></i>
                          </label>
                        </li>
                        <li *ngFor="let au of user_list?.result?.userList">
                          <div class="table smart-form">
                            <label class="checkbox">
                              <input name="checkbox-inline" type="checkbox" (change)="handle($event)" [checked]="selected_user[au.id]" value="{{au.id}}">
                              <i></i>
                              <img alt="{{au.u_username}}" class="online width-40" src="{{domain_url}}{{au.u_avatar}}" *ngIf="au.u_avatar">
                              <img alt="{{au.u_username}}" class="online width-40" src="assets/img/avatars/male.png" *ngIf="!au.u_avatar">
                              <span >{{au.u_username}}</span>
                            </label>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <!--<div class=" form-group col col-lg-6">-->
                <!--<div class="selector-choices-wrapper">-->
                  <!--<ul class="select2-selection__rendered" *ngIf="show_user_type == 1">-->
                    <!--<li class="select2-selection__choice" title="" *ngFor="let au1 of todo_info?.result?.assign_list">-->
                      <!--<span class="select2-selection__choice__remove" >×</span>{{au1.u_username}}</li>-->
                  <!--</ul>-->
                  <!--<ul class="select2-selection__rendered" *ngIf="show_user_type == 2">-->
                    <!--<li class="select2-selection__choice" title="Montana" *ngFor="let au2 of todo_info?.result?.follower_list">-->
                      <!--<span class="select2-selection__choice__remove" role="presentation">×</span>{{au2.u_username}}-->
                    <!--</li>-->
                  <!--</ul>-->
                <!--</div>-->
              <!--</div>-->
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-ng-click="ok()"  data-dismiss="modal" (click)="submitSelectedUser(todo_info?.result?.todo_id)">确定</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal -->
    </div>
  </div>

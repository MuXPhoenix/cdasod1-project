<div id="content">
  <div class="row">
    <sa-big-breadcrumbs [items]="['设备管理', '基站图表']" icon="file-text-o" class="col-xs-12 col-sm-7 col-md-7 col-lg-4"></sa-big-breadcrumbs>
  </div>
  <sa-widgets-grid>
    <div class="row">
      <article class="col-sm-12">
        <sa-widget  [editbutton]="false" [deletebutton]="false" color="darken">
          <header><span class="widget-icon"> <i class="fa fa-comments"></i> </span>
            <h2>基站图表</h2>
            <div class="jarviswidget-ctrls" role="menu">
              <a routerLink="/equipment/chart-setting" href="javascript:void(0);" class="button-icon jarviswidget-edit-btn" rel="tooltip" title="Edit" data-placement="bottom">
                <i class="fa fa-cog"></i></a>
            </div>
          </header>
          <div>
            <div class="widget-body no-padding">
              <div class="row">
                <article class="col-sm-12">
                  <div class="navbar navbar-default">
                    <div class="collapse navbar-collapse" >
                      <form class="navbar-form navbar-left" role="search" [formGroup]="formModel" (ngSubmit)="onSubmit()" novalidate >
                        <div class="form-group">
                          <input type="text" name="keyword" maxlength="15" formControlName="keyword" class="form-control" placeholder="请输入搜索内容">
                        </div>
                        <button type="submit" class="btn btn-default">
                          <i class="glyphicon glyphicon-search"></i>
                          搜索
                        </button>
                      </form>
                    </div>
                  </div>
                </article>
              </div>
              <sa-datatable tableClass="table table-striped table-bordered table-hover" [detailsFormat]="detailsFormat">
                <thead>
                <tr role="row">
                  <th class="details-control sorting_disabled"></th>
                  <th>
                    设备
                  </th>
                  <th>
                    设备名称
                  </th>
                  <th>
                    检测数据
                  </th>
                  <th>
                    状态
                  </th>
                  <th>
                    <i class="fa fa-fw fa-calendar text-muted hidden-md hidden-sm hidden-xs"></i>
                    采集数据时间
                  </th>
                  <th >操作</th>
                </tr>
                </thead>

              </sa-datatable>
              <div *ngIf="i3otpList.result?.i3otpList?.data">
              <sa-datatable *ngFor="let il of i3otpList.result?.i3otpList?.data;let ind = index;" tableClass="table table-striped table-bordered table-hover" [detailsFormat]="detailsFormat">
                <tbody >
                <tr role="row" *ngIf="status.indexOf(ind+',') === -1" class="odd">
                  <td class="details-control" (click)="changeStatus(ind,'+')">
                  </td>
                  <td >
                    {{il.i3otp_address}}
                    <br>
                    <small class="text-muted">
                      <i>ID: {{il.i3otp_pid}}</i>
                    </small>
                  </td>
                  <td>
                    {{il.i3otp_name}}
                  </td>
                  <td>
                    <a class="btn btn-success btn-xs" *ngFor="let i1 of il.i3otp_attribute1">{{i1}}</a>
                    <a class="btn btn-success btn-xs" *ngFor="let i2 of il.i3otp_attribute2">{{i2}}</a>
                    <a class="btn btn-success btn-xs" *ngFor="let i3 of il.i3otp_attribute3">{{i3}}</a>
                  </td>
                  <td style="width:70%;">
                    <i *ngIf="il.i3otp_status == 0" class="fa fa-circle txt-color-darken font-xs">未激活</i>
                    <i *ngIf="il.i3otp_status == 1" class="fa fa-circle text-danger font-xs">使用中</i>
                    <i *ngIf="il.i3otp_status == 2" class="fa fa-circle txt-color-darken font-xs">返厂维修</i>
                    <i *ngIf="il.i3otp_status == 3" class="fa fa-circle txt-color-darken font-xs">报废</i>
                  </td>
                  <td>{{il.i3otp_sensor_intervan}}</td>
                  <td>
                    <!--<a class="btn btn-warning btn-xs" ><span class="glyphicon glyphicon-pencil"></span>修改</a>-->
                    <!--<a class="btn btn-danger btn-xs" ><span class="glyphicon glyphicon-remove"></span>删除</a>-->
                    <a (click)="notificationExample2( il.i3otp_pid,il.i3otp_str )" class="btn btn-primary btn-xs" ><span class="glyphicon glyphicon-adjust"></span>对比</a>
                    <a (click)="showJoinPic();lgModal.show()" class="btn btn-primary btn-xs" ><span class="glyphicon glyphicon-adjust"></span>对比</a>
                  </td>
                </tr>
                <tr role="row" *ngIf="status.indexOf(ind+',') != -1" class="odd shown">
                  <td class="details-control" (click)="changeStatus(ind,'-')">
                  </td>
                  <td >
                    {{il.i3otp_address}}
                    <br>
                    <small class="text-muted">
                      <i>ID: {{il.i3otp_pid}}</i>
                    </small>
                  </td>
                  <td>
                    {{il.i3otp_name}}
                  </td>
                  <td>
                    <a class="btn btn-success btn-xs" *ngFor="let i1 of il.i3otp_attribute1">{{i1}}</a>
                    <a class="btn btn-success btn-xs" *ngFor="let i2 of il.i3otp_attribute2">{{i2}}</a>
                    <a class="btn btn-success btn-xs" *ngFor="let i3 of il.i3otp_attribute3">{{i3}}</a>
                   </td>
                  <td style="width:70%;">
                    <i *ngIf="il.i3otp_status == 0" class="fa fa-circle txt-color-darken font-xs">未激活</i>
                    <i *ngIf="il.i3otp_status == 1" class="fa fa-circle text-danger font-xs">使用中</i>
                    <i *ngIf="il.i3otp_status == 2" class="fa fa-circle txt-color-darken font-xs">返厂维修</i>
                    <i *ngIf="il.i3otp_status == 3" class="fa fa-circle txt-color-darken font-xs">报废</i>
                  </td>
                  <td>{{il.i3otp_sensor_intervan}}</td>
                  <td>
                    <!--<a class="btn btn-warning btn-xs" ><span class="glyphicon glyphicon-pencil"></span>修改</a>-->
                    <!--<a class="btn btn-danger btn-xs" ><span class="glyphicon glyphicon-remove"></span>删除</a>-->
                    <a (click)="notificationExample2( il.i3otp_pid,il.i3otp_str )" class="btn btn-primary btn-xs" ><span class="glyphicon glyphicon-adjust"></span>对比</a>
                    <a (click)="showJoinPic();lgModal.show()" class="btn btn-primary btn-xs" ><span class="glyphicon glyphicon-adjust"></span>对比</a>
                  </td>
                </tr>
                <tr *ngIf="status.indexOf(ind+',') != -1">
                  <td colspan="10">
                    <table cell-padding="5" cell-spacing="0" border="0" class="table table-hover table-condensed">
                      <tbody>
                      <tr >
                        <td style="width:70%;border-right:1px solid #ccc; ">
                          <div echarts [options]="chartOption1[ind]" class="demo-chart" *ngIf="chartOption1[ind]" ></div>


                        </td>
                        <td >
                          <div class="row">
                            <div class="col-md-6">
                              <table class="table table-hover table-bordered">
                                <thead>
                                <tr>
                                  <th style="text-align: center;" colspan="2">最新数据</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr *ngFor="let ll of newList[ind];" [ngStyle]="{'background-color': ll.color}">
                                  <td>
                                    <strong>{{ll.name}}</strong>
                                  </td>
                                  <td>{{ll.value}}%</td>
                                </tr>
                                </tbody>
                              </table>
                            </div>
                            <!--<div class="col-md-6">-->
                              <!--<table class="table table-hover table-bordered">-->
                                <!--<thead>-->
                                <!--<tr>-->
                                  <!--<th style="width:50%;text-align: center;" colspan="2">异常数据</th>-->
                                <!--</tr>-->
                                <!--</thead>-->
                                <!--<tbody>-->
                                <!--<tr class="danger">-->
                                  <!--<td>-->
                                    <!--<strong>甲烷</strong>-->
                                  <!--</td>-->
                                  <!--<td>0.5%</td>-->
                                <!--</tr>-->
                                <!--<tr  class="danger">-->
                                  <!--<td>-->
                                    <!--<strong>一氧化碳</strong>-->
                                  <!--</td>-->
                                  <!--<td>0.2%</td>-->
                                <!--</tr>-->

                                <!--</tbody>-->
                              <!--</table>-->
                            <!--</div>-->
                          </div>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                </tbody>

              </sa-datatable>
              </div>

              <!-- 底部-（分页部分）-->

              <div class="dt-toolbar-footer">
                <div class="col-sm-6 col-xs-12 hidden-xs">
                  <div class="dataTables_info"  role="status" aria-live="polite">
                  </div>
                </div>
                <div class="col-sm-6 col-xs-12 hidden-xs text-right">
                  <ul class="pagination">
                    <li>
                      <a (click)="pagination(i3otpList.result?.i3otpList?.prev_page_url)"><i class="fa fa-arrow-left"></i></a>
                    </li>
                    <li>
                      <a (click)="pagination(i3otpList.result?.i3otpList?.next_page_url)"><i class="fa fa-arrow-right"></i></a>
                    </li>
                  </ul>
                  <!--<ul class="pagination pagination-sm">-->
                    <!--<li class="disabled">-->
                      <!--<a href="">上一页</a>-->
                    <!--</li>-->
                    <!--<li class="success">-->
                      <!--<a href="">1</a>-->
                    <!--</li>-->
                    <!--<li>-->
                      <!--<a href="">2</a>-->
                    <!--</li>-->
                    <!--<li>-->
                      <!--<a href="">3</a>-->
                    <!--</li>-->
                    <!--<li>-->
                      <!--<a href="">...</a>-->
                    <!--</li>-->
                    <!--<li>-->
                      <!--<a href="">99</a>-->
                    <!--</li>-->
                    <!--<li>-->
                      <!--<a href="">下一页</a>-->
                    <!--</li>-->
                  <!--</ul>-->
                </div>
              </div>
            </div>
          </div>
        </sa-widget>




      </article>


    </div>

  </sa-widgets-grid>




  <div bsModal #lgModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
       aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" (click)="ngOnClose();lgModal.hide()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">数据对比图 {{loading}}</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div *ngFor="let char of chartOption2;let inde = index;">
                <h4 class="alert alert-info"> {{metric_title[inde]}}对比图</h4>
                <div echarts [options]="chartOption2[inde]" class="demo-chart"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" (click)="ngOnClose();lgModal.hide()">
            返回
          </button>
        </div>
      </div>
    </div>
  </div>


</div>
